{% extends "/base.html" %}
{% set active_page = "projects" %}
{% import "projects/_helpers.html" as helper %}
{% set has_splash = "true" %}
{% set description = project.description %}

{% block content %}
{% if project %}
{% include "_flash_messages_floating.html" %}
<div class="splash" data-src="{{ url_for('static', filename='img/splash/category_' + project.category_id|string + '.jpg') }}">
    <div class="vcenter hcenter position-relative" style="height:100%;">
        <div class="container text-center ie-mid-vcenter padding-top-lg">
            <div class="container-padded">
                <h1>{{ helper.render_project_title(project, upload_method) }}</h1>
                <h2>{{ overall_progress | round | int }}% complete</h2>

                <!-- Contribute button -->
                <div class="col-xs-12">
                    <a href="{{ url_for('project.presenter', short_name=project.short_name)}}"
                       data-progress="{{ overall_progress | round | int }}"
                       class="btn btn-circle btn-circle-large btn-circle-progress {% if overall_progress < 100 %}glowing-link{% endif %}">
                        <div class="arc arc-q1"></div>
                        <div class="arc arc-q2"></div>
                        <div class="arc arc-q3"></div>
                        <div class="arc arc-q4"></div>
                        <p>Contribute<br>Now</p>
                    </a>
                </div>

            </div>
        </div>
    </div>
</div>

<a id="info"></a>
<section class="mid-grey pattern-brushed box-shadow-grey-bottom inset-text-grey">

    {% if project.info.attribution %}
        <p class="attribution"><small>Photo:
        {% if project.info.attribution_link %}
            <a href="{{project.info.attribution_link}}" target="_blank">
        {% endif %}
        {{project.info.attribution}}
        {% if project.info.attribution_link %}
            </a>
        {% endif %}
        </small></p>
    {% endif %}

    <div class="container container-padded">
        <div class="col-xs-10 col-xs-offset-1">

            {% if overall_progress == 100 %}
                <p class="lead-large">
                    Many thanks to all those who helped us complete this project.
                </p>
                <p class="list-volunteers"></p>
            {% else %}

            <div class="tutorial-video" data-src="{{ url_for('static', filename='video/category_' + project.category_id|string + '.mp4') }}">

            </div>

                {% if project.long_description %}
                    <div class="description">
                        {{ project.long_description | e | markdown }}
                    </div>
                {% endif %}

            {% endif %}
        </div>
    </div>
</section>



{% if overall_progress < 100 %}
<section>
    <div class="container container-padded">
        <div class="col-xs-12 text-center">
            <div class="row">
                <h2>Get involved</h2>
                <p>Your contributions will have a direct impact on enabling future reasearch at the British Library.<p>
                <div class="row text-center padding-top-xs">
                    <a href="{{ url_for('project.presenter', short_name=project.short_name)}}" class="btn btn-danger"> Contribute now</a>
                </div>
                <hr class="padding-bottom-xs">
                {{ helper.render_social_media_buttons("www.libcrowds.com/project/{{ project.short_name }}", "Come and give us a hand with {{ project.name }}!") }}
            </div>
        </div>
    </div>
</section>
{% endif %}

{% else %}
    {{ helper.render_non_existant_project() }}
{% endif %}

{{ helper.broken_image() }}
{% endblock %}