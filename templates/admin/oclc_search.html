{% extends "base.html" %}
{% set active_page = "profile" %}
{% set active_link = "categories" %}
{% from "admin/_helpers.html" import render_admin_local_nav %}

{% block content %}
{{ render_admin_local_nav(current_user, active_link) }}
<div class="container-padded">
    <div class="container container-padded">
        <div class="row">
            <div class="col-sm-9 col-sm-offset-3">
                <h1>Search the OCLC database</h1>
                <h4>This page can be used to test requests to and responses received from the OCLC database</h4>
                <hr>
                {% from "_formhelpers.html" import render_field %}
                <form id="catalogue-form" role="form" method="POST" action="{{url_for('oclc.search')}}" {% if apiString %}hidden{% endif %}>
                    {{form.hidden_tag()}}
                    <fieldset>
                        {{ render_field(form.query, placeholder= _('Query'), class="form-control", required="true") }}
                        {{ render_field(form.startPos, placeholder= _('Starting position'), class="form-control", type="number") }}
                        {{ render_field(form.maxRecords, placeholder= _('Maximum records'), class="form-control", type="number") }}
                        {{ render_field(form.format, class="form-control inline-radio") }}
                        <div class="pull-right" role="group">
                            <button type="submit" class="btn btn-danger">{{_('Search')}}</button>
                        </div>
                    </fieldset>
                </form>
                {% if apiString %}
                    <div id="catalogue-results">
                        <a href="#" id="search-catalogue-again" class="btn btn-danger pull-right">Search Again</a>
                        <h3>API query<strong></strong></h3>
                        <textarea rows="3" class="form-control readonly-select" onclick="this.focus();this.select()" readonly>{{apiString}}</textarea>
                        <h3 class="padding-top-sm">Example Result:</h3>
                        <pre class="prettyprint" id="xml"></pre>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
<script type="text/xml" id="xml2">{{record}}</script>
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
{% endblock %}
